<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" th:href="@{/css/main.css}">
    <link rel="icon" th:href="@{/icon/logoPMS.png}">
    <title>Admission</title>

    <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
    rel="stylesheet"
    integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM"
    crossorigin="anonymous">
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />

</head>
<body>
<!-- Start Nav Bar -->
<nav class="navbar fixed-top" style="border-bottom: 1px solid #cecece !important;">
  <div class="d-flex flex-row">
      <a class="navbar-brand" href="#"> <img
              src="icon/hamburger.png" alt="Logo" width="25"
              height="30"></a>
      <div class="container d-flex flex-row justify-content-start">
          <a class="navbar-brand" href="#"> <img
                  src="icon/logoPMS.png" alt="Logo" width="35"
                  height="35" class="d-inline-block align-text-top"> PMSystems
          </a>
      </div>
  </div>

  <div class="dropdown justify-content-end nav-item" style="margin-right: 40px;">
      <button class="dropbtn"><span class="material-symbols-outlined"
              style="margin-top: 10px;"> settings </span></button>
      <div class="dropdown-content">
          <a class="dropdown-item" th:href="@{/add-account}">Add Account</a>
          <a class="dropdown-item" th:href="@{/logout}">Log Out</a>
      </div>
  </div>
</nav>
<!-- End Nav Bar-->

<!-- Start Side Bar-->
<div id="sidebar" class="d-flex flex-column flex-shrink-0 text-black bg-white col-2 mt-5 position-fixed"
  style="height: 92%;">
  <ul class="nav nav-underline flex-column mb-auto" style="padding-left: 40px;">
      <h5 style="margin-top: 20px;">Menu</h5>
      <li><a th:href="@{/adminmainmenu}"
              class="nav-link text-black d-flex justify-content-start"
              aria-current="page"><span class="material-symbols-outlined"
                  style="margin-right: 20px;"> dashboard </span> Dashboard </a></li>
      <li class="nav-item"><a href="#"
              class="nav-link text-black d-flex justify-content-start"
              onmouseover="changeIconColor(this, '#FFC107')"
              onmouseout="changeIconColor(this, '#000000')">
              <span class="material-symbols-outlined"
                  style="margin-right: 20px;"> calendar_month </span>Schedule</a></li>
      <li class="nav-item"><a th:href="@{/admission}"
              class="nav-link active text-black d-flex justify-content-start"
              onmouseover="changeIconColor(this, '#FFC107')"
              onmouseout="changeIconColor(this, '#000000')">
              <span class="material-symbols-outlined"
                  style="margin-right: 20px;"> group_add </span>Admission
          </a></li>
      <hr class="hr-line">

      <li><a th:href="@{/therapist}"
              class="nav-link text-black d-flex justify-content-start"
              aria-current="page" onmouseover="changeIconColor(this, '#FFC107')"
              onmouseout="changeIconColor(this, '#000000')"><span class="material-symbols-outlined"
                  style="margin-right: 20px;"> psychology </span> Therapist </a></li>

      <li class="nav-item"><a th:href="@{/patient}"
              class="nav-link text-black d-flex justify-content-start"
              onmouseover="changeIconColor(this, '#FFC107')"
              onmouseout="changeIconColor(this, '#000000')"><span class="material-symbols-outlined"
                  style="margin-right: 20px;">ward </span>Patient</a></li>

      <li class="nav-item"><a href="#"
              class="nav-link text-black d-flex justify-content-start"
              onmouseover="changeIconColor(this, '#FFC107')"
              onmouseout="changeIconColor(this, '#000000')">
              <span class="material-symbols-outlined"
                  style="margin-right: 20px;"> article </span>Record
          </a></li>
  </ul>
  <hr style="margin-bottom: 0px !important;">
</div>
<!-- End Side Bar-->

<!-- JavaScript code -->
<script>
  function changeIconColor(element, color) {
      const icon = element.querySelector(".material-symbols-outlined");
      icon.style.color = color;
  }
</script>

  <!--content-->

  <div class="card mb-3 d-flex justify-content-center col-6 offset-4" style="max-width: 60rem; margin-top: 5%;">
    <div class="card-body">
        <h2 class="head text-center">Search Patient</h2>
        <div class="input-group mb-3">
            <input type="text" class="form-control" placeholder="Enter Patient IC" aria-label="Patient IC" aria-describedby="searchButton">
            <div class="input-group-append">
                <button class="btn btn-primary" type="button" id="searchButton">Search</button>
            </div>
        </div>

        <table class="table mt-4">
            <thead>
                <tr>
                    <th>Patient Name</th>
                    <th>Admission In</th>
                    <th>Admission Out</th>
                    <th>Assign Therapist</th>
                </tr>
            </thead>
            <tbody id="patientTableBody">
                <!-- Populated dynamically with JavaScript -->
            </tbody>
        </table>
    </div>
    <footer class="d-flex justify-content-center">
        <p>&copy; <span id="currentYear"></span> Patient Management System. All rights reserved.</p>
    </footer>
</div>

<script>
    // Function to add patient data to the table
    function addPatientData(patientName) {
        var tableBody = document.getElementById("patientTableBody");
        var newRow = document.createElement("tr");

        // Create table cells
        var nameCell = document.createElement("td");
        nameCell.textContent = patientName;
        newRow.appendChild(nameCell);

        var admissionInCell = document.createElement("td");
        var admissionInButton = document.createElement("button");
        admissionInButton.className = "btn btn-success";
        admissionInButton.textContent = "Admission In";
        admissionInCell.appendChild(admissionInButton);
        newRow.appendChild(admissionInCell);

        var admissionOutCell = document.createElement("td");
        var admissionOutButton = document.createElement("button");
        admissionOutButton.className = "btn btn-danger";
        admissionOutButton.textContent = "Admission Out";
        admissionOutCell.appendChild(admissionOutButton);
        newRow.appendChild(admissionOutCell);

        var assignTherapistCell = document.createElement("td");
        var therapistDropdown = document.createElement("div");
        therapistDropdown.className = "dropdown";

        var therapistButton = document.createElement("button");
        therapistButton.className = "btn btn-primary dropdown-toggle";
        therapistButton.type = "button";
        therapistButton.id = "therapistDropdown";
        therapistButton.setAttribute("data-toggle", "dropdown");
        therapistButton.setAttribute("aria-haspopup", "true");
        therapistButton.setAttribute("aria-expanded", "false");
        therapistButton.textContent = "Assign Therapist";

        var dropdownMenu = document.createElement("div");
        dropdownMenu.className = "dropdown-menu";
        dropdownMenu.setAttribute("aria-labelledby", "therapistDropdown");

        // Add therapist options
        var therapist1Option = document.createElement("a");
        therapist1Option.className = "dropdown-item";
        therapist1Option.href = "#";
        therapist1Option.textContent = "Therapist 1";
        dropdownMenu.appendChild(therapist1Option);

        var therapist2Option = document.createElement("a");
        therapist2Option.className = "dropdown-item";
        therapist2Option.href = "#";
        therapist2Option.textContent = "Therapist 2";
        dropdownMenu.appendChild(therapist2Option);

        var therapist3Option = document.createElement("a");
        therapist3Option.className = "dropdown-item";
        therapist3Option.href = "#";
        therapist3Option.textContent = "Therapist 3";
        dropdownMenu.appendChild(therapist3Option);

        therapistDropdown.appendChild(therapistButton);
        therapistDropdown.appendChild(dropdownMenu);
        assignTherapistCell.appendChild(therapistDropdown);
        newRow.appendChild(assignTherapistCell);

        // Add the new row to the table
        tableBody.appendChild(newRow);
    }

    // Event listener for the search button
    var searchButton = document.getElementById("searchButton");
    searchButton.addEventListener("click", function () {
        var patientICInput = document.getElementById("patientICInput");
        var patientIC = patientICInput.value; // Get the entered patient IC

        // Assuming you have a function named searchPatients(patientIC) to fetch patient data from the database
        // and it returns an array of patient objects with the name property
        var searchResults = searchPatients(patientIC);

        // Clear existing table rows
        var tableBody = document.getElementById("patientTableBody");
        tableBody.innerHTML = "";

        // Add the patient data to the table
        searchResults.forEach(function (patient) {
            addPatientData(patient.name);
        });

        // Clear the patient IC input field
        patientICInput.value = "";
    });
    <script
                src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
                integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz"
                crossorigin="anonymous"></script>
            <script
                src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
                integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
                crossorigin="anonymous"></script>
            <script
                src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"
                integrity="sha384-fbbOQedDUMZZ5KreZpsbe1LCZPVmfTnH7ois6mU1QK+m14rQ1l2bGBq41eYeM/fS"
                crossorigin="anonymous"></script>

                <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
                <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
                <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
                <!-- <script src="script.js"></script> -->
</script>


</body>

</html>